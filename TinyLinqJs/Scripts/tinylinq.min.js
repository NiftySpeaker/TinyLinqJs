var tinylinq=tinylinq||{};(function(){function _err(n){throw new Error(n);}function ti(r,u,f){var l="seedOrFunc",c;t(r,l);var y=n(this),e=null,s,p=0;for(u||f?((typeof r==tt||typeof et(r)==tt)&&_err(o+h+l+" can not be a function in this overload"),s=i(u,"func"),e=r):(s=r,a(this),s=i(s,l),e=y[0],p=1),c=p;c<y.length;c++)e=s(e,y[c]);return f&&(e=v(f)(e)),e}function ii(i){t(i,c);i=r(i);var u=w(n(this),function(n){return!i(n)});return u==null}function ri(t){var i=t,u;return i?(i=r(i),u=w(n(this),function(n){return i(n)}),u!=null):n(this).length>0}function ui(i){t(i,s);a(this);i=et(i);var r=this.Sum(i);return r/n(this).length}function fi(i){t(i,l);var f=ot(i),e=n(this),r=[];return e.length>0&&(r=u(e)),f.length>0&&(r==null?r=f:ht(r,f)),r}function ei(t,i){var u=n(this),f,r;if(u.length==0)return!1;for(y(i),f=p(i),r=0;r<u.length;r++)if(f(u[r],t))return!0;return!1}function oi(t){var i=n(this);return t?(t=r(t),ni(i,t).length):i.length}function si(t){var i=n(this);return i.length>0?u(i):[t||null]}function hi(t){var r=n(this),u,i;return r.length?(y(t),u=p(t),i=[],arrayForEach(r,function(n){var t=w(i,function(t){return u(t,n)});t||i.push(n)}),i):[]}function ci(i){t(i,"index");ut(i,"index");var r=n(this);return parseInt(i)>r.length-1?null:r[i]}function li(n){var t=this.ElementAtOrDefault(n);return t||_err("ArgumentOutOfRangeException: The index was out of range."),t}function ai(n,t){return pt(!1,this,n,t)}function vi(t){var i=n(this);return i.length?t?w(i,r(t)):i[0]:null}function yi(n){a(this);var t=this.FirstOrDefault(n);return ft(t),t}function pi(i,r,u,e){return t(i,f),g(n(this),i,at(r),u,e)}function wi(t,i,r,u,f){var e={i:t,oks:i,iks:r,rs:u};if(e=yt(e),n(this).length==0||n(e.i).length==0)return[];var o=f||vt(),h=g(n(e.i),e.iks,null,null,o),s=[];return arrayForEach(n(this),function(n){var t=nt(h,function(t){return o(e.oks(n),t.Key)}).SingleOrDefault();t&&s.push(e.rs(n,t))}),s}function bi(n,t){return pt(!0,this,n,t)}function ki(t,i,r,u,f){var e={i:t,oks:i,iks:r,rs:u};e=yt(e);var o=f||vt(),h=g(n(e.i),e.iks,null,null,o),s=[];return arrayForEach(n(this),function(t){var i=nt(h,function(n){return o(e.oks(t),n.Key)}).SelectMany(function(n){return n});arrayForEach(n(i),function(n){s.push(e.rs(t,n))})}),s}function di(t){var i=n(this),u;if(i.length==0)return null;if(!t)return i[i.length-1];for(r(t),u=i.length-1;u>=0;u--)if(t(i[u]))return i[u];return null}function gi(n){a(this);var t=this.LastOrDefault(n);return ft(t),t}function nr(n){return this.Count(n)}function tr(n){return wt(this,n,!1)}function ir(n){return wt(this,n,!0)}function rr(i){t(i,"TResult");tinylinq.typeValidators[i]||_err(o+h+"TResult is an unknown type. Please extend the tinylinq.typeValidators!");var r=nt(n(this),function(n){return tinylinq.typeValidators[i](n)});return n(r)}function ur(t,i){return kt(n(this),t,i,!0)}function fr(t,i){return kt(n(this),t,i,!1)}function er(){var t=u(n(this));return t.reverse()}function or(t){if(!t)return u(n(this));t=i(t,s);var r=-1;return st(n(this),function(n){return t(n,++r)})}function sr(r,u){var f="collectionsSelector",e,s;return t(r,f),r=i(r,f),e=[],s=0,arrayForEach(n(this),function(t){var i=n(r(t,s));Array.isArray(i)||_err(o+"The "+f+" does not return an array");u=v(u);arrayForEach(i,function(n){var i=u?u(t,n):n;e.push(i)});s++}),e}function hr(i,r){var u,e,o,f;if(t(i,l),y(r),u=n(this),e=n(i),u.length!=e.length)return!1;if(u===e)return!0;for(o=p(r),f=0;f<u.length;f++)if(!o(u[f],e[f]))return!1;return!0}function cr(t){var i=n(this),u=null;if(!t)switch(i.length){case 0:return null;case 1:return i[0];default:_err(ct)}return t=r(t),arrayForEach(i,function(n){t(n)&&(u!=null&&_err(ct),u=n)}),u}function lr(n){var i=this,t=i.SingleOrDefault(n);return ft(t),t}function ar(i){var r,e,f;if(t(i,d),ut(i,d),i<=0)return u(n(this));if(r=n(this),i>=r.length)return[];for(e=[],f=i;f<r.length;f++)e.push(r[f]);return e}function vr(i){var u;t(i,c);i=r(i);var o=[],f=n(this),e=!0;for(u=0;u<f.length;u++)e&&(e=i(f[u],u)),e||o.push(f[u]);return o}function yr(r){var u,f;return(t(r,s),r=i(r,s),u=n(this),u.length==0)?0:(f=0,arrayForEach(u,function(n){f+=r(n)}),f)}function pr(i){var r,e,f;if(t(i,d),ut(i,d),r=n(this),i>=r.length)return u(r);for(e=[],f=0;f<i;f++)e.push(r[f]);return e}function wr(i){var e,f,u;for(t(i,c),i=r(i),e=[],f=n(this),u=0;u<f.length;u++){if(!i(f[u],u))break;e.push(f[u])}return e}function br(t,i){return gt(n(this),t,i,!0)}function kr(t,i){return gt(n(this),t,i,!1)}function dr(){return u(n(this))}function gr(keySelector,r,u){t(keySelector,f);keySelector=i(keySelector,f);r=at(r);y(u);var result={Keys:[],Values:[],Count:0},elemSelect=r||function(n){return n},equalComp=p(u);return arrayForEach(n(this),function(item){var key=keySelector(item),value=elemSelect(item);arrayForEach(result.Keys,function(n){equalComp(key,n)&&_err("ArgumentException: An element with the same key already exists")});eval("result."+key+" = value");result.Keys.push(key);result.Values.push(value);result.Count=++result.Count}),result}function nu(n,t,i){return this.GroupBy(n,t,null,i)}function tu(){return e(this)}function iu(n,t){return e(this.Concat(n)).Distinct(t)}function ru(i){t(i,c);var u=r(i);return nt(n(this),u)}function uu(i,r){var f,u;t(i,l);t(r,rt);f=ot(i);r=v(r);var e=n(this),s=e.length<f.length?e.length:f.length,o=[];for(u=0;u<s;u++)o.push(r(e[u],f[u]));return o}var b="undefined",tt="function",k="InvalidOperationException: ",o="TypeLoadException: ",it="The sequence contains ",ct=k+it+"more than one element",h="Argument ",c="predicate",s="selector",rt="resultSelector",l="second",f="keySelector",d="count",t=function(n,t){n||n==0||_err("ArgumentNullException: Missing "+t)},a=function(t){n(t).length==0&&_err(k+it+"no elements")},lt=function(n,t){Array.isArray(n)||_err(o+h+t+" is not an array")},ut=function(n,t){(isNaN(n)||parseInt(n)!=parseFloat(n))&&_err(o+h+t+" is not an int")},ft=function(n){n||_err(k+it+"no matching element")},i=function(n,t){return n=et(n),typeof n!=tt&&_err(o+h+t+" is not a function"),n},et=function(n){return typeof n=="string"&&n.indexOf("=>")>0&&tinylinq.Func&&(n=tinylinq.Func(n)),n},r=function(n){return i(n,c)},v=function(n){return n?i(n,rt):n},y=function(n){n&&i(n,"comparer")},at=function(n){return n?i(n,"elementSelector"):n},ot=function(t){var i=n(t);return lt(i,l),i},p=function(n){return n||function(n,t){return n===t}},vt=function(){return function(n,t){return JSON.stringify(n)===JSON.stringify(t)}},yt=function(r){var u="inner",f="outerKeySelector",e="innerKeySelector";return t(r.i,u),t(r.oks,f),t(r.iks,e),t(r.rs,rt),lt(n(r.i),u),r.oks=i(r.oks,f),r.iks=i(r.iks,e),r.rs=v(r.rs),r},pt=function(i,r,f,o){var a,s,c,h;if(t(f,l),a=ot(f),s=n(r),!s.length||!a.length)return i?[]:u(n(r));for(c=[],h=0;h<s.length;h++)f.Contains(s[h],o)==i&&c.push(s[h]);return e(c).Distinct(o)},g=function(t,r,u,e,o){var h;if(r=i(r,f),y(o),!t.length)return[];var c=u||function(n){return n},l=p(o),s=[];return arrayForEach(t,function(n){var i=r(n),t=w(s,function(n){return l(n.Key,i)});t||(t=[],t.Key=i,s.push(t));t.push(c(n))}),e&&(h=v(e),s=st(s,function(t){return h(n(t).Key,t)})),s},wt=function(r,u,f){t(u,s);a(r);i(u,s);var e=f?2147483648:-2147483648;return arrayForEach(n(r),function(n){var t=u(n);(f&&t<e||!f&&t>e)&&(e=t)}),e},bt=function(n,t,i){return n<t?i?-1:1:n>t?i?1:-1:0},kt=function(n,r,e,o){var s=r;t(s,f);s=i(s,f);var h=[],c=e||bt,h=u(n);return h.sort(function(n,t){return c(s(n),s(t),o)}),h.SortKeys=[{key:s,dir:o?"asc":"desc",comp:c}],h},dt=function(t,i,r,u,f,o){var h=e(g(n(t),u[f].key)),s=[];return arrayForEach(n(h),function(t){var h;h=f<u.length-1?dt(e(t),i,r,u,f+1,o):o?e(t).OrderBy(i,r):e(t).OrderByDescending(i,r);ht(s,n(h))}),s},gt=function(n,r,u,e){n.SortKeys||_err(k+"ThenBy can not be called without OrderBy");t(r,f);var s=i(r,f),h=u||bt,o=dt(n,s,h,n.SortKeys,0,e);return o.SortKeys=[],ht(o.SortKeys,n.SortKeys),o.SortKeys.push({key:s,dir:e?"asc":"desc",comp:h}),o},nt=function(n,t){var i=-1;return ni(n,function(n){return i++,t(n,i)})},st=function(n,t){return n.map(t)},arrayForEach=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])},ni=function(n,t){for(var r=[],i=0;i<n.length;i++)t(n[i])&&r.push(n[i]);return r},w=function(n,t){for(var i=0;i<n.length;i++)if(t(n[i]))return n[i];return null},ht=function(n,t){for(var i=0;i<t.length;i++)n.push(t[i]);return n},u=function(n){return st(n,function(n){return n})},eu=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},n=function(n){return typeof ko!=b?ko.utils.unwrapObservable(n):n},e=function(n){return n.valueHasMutated?n:typeof ko!=b?ko.observableArray(n):n},fu=[ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,yi,vi,pi,wi,bi,ki,gi,di,nr,tr,ir,rr,ur,fr,er,or,sr,hr,cr,lr,ar,vr,yr,pr,wr,br,kr,dr,gr,nu,iu,ru,uu];return arrayForEach(fu,function(n){var t=n.toString().substring(n.toString().indexOf(" ")+1,n.toString().indexOf("("));typeof ko!=b&&(ko.observableArray.fn[t]=n);Array.prototype[t]=n}),typeof ko!=b&&(Array.prototype.ToObservableArray=tu),Array.prototype.Key=null,Array.prototype.SortKeys=null,tinylinq.typeValidators={string:function(n){return typeof n=="string"},int:function(n){return typeof n=="number"&&parseInt(n)==parseFloat(n)},float:function(n){return typeof n=="number"},object:function(n){return typeof n=="object"&&!Array.isArray(n)},array:function(n){return Array.isArray(n)},"function":function(n){return typeof n=="function"},bool:function(n){return typeof n=="boolean"}},tinylinq})();
//# sourceMappingURL=tinylinq.min.js.map
